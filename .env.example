# ============================================================================
# PRISM ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your values
#
# IMPORTANT: Create a DEDICATED Azure AI Search service for Prism using:
#   cd infra/azure && ./deploy-search.sh dev
#
# Do NOT reuse search services from other projects!
# ============================================================================

# ============================================================================
# AZURE AI SEARCH (REQUIRED - Must be dedicated to Prism)
# ============================================================================
# Run: cd infra/azure && ./deploy-search.sh dev
# This creates an isolated search service in rg-prism-dev
#
# WARNING: Using a shared search service can cause data conflicts!
# Each Prism deployment needs its own search service.

AZURE_SEARCH_ENDPOINT=https://srch-prism-dev-YYYYMMDD.search.windows.net
AZURE_SEARCH_ADMIN_KEY=<your-search-admin-key>
AZURE_SEARCH_API_VERSION=2025-08-01-preview

# Index name is AUTOMATICALLY derived from project name:
#   Project: nist-csf → Index: prism-nist-csf-index
#   Project: my-project → Index: prism-my-project-index
# No manual configuration needed!

# ============================================================================
# AZURE OPENAI (REQUIRED)
# ============================================================================
# Can be shared across projects - these are stateless API calls

# Chat Model
AZURE_OPENAI_API_KEY=<your-openai-key>
AZURE_OPENAI_ENDPOINT=https://<your-openai-resource>.openai.azure.com
AZURE_OPENAI_MODEL_NAME=gpt-4.1
AZURE_OPENAI_API_VERSION=2025-01-01-preview
AZURE_OPENAI_CHAT_DEPLOYMENT_NAME=gpt-4.1

# Knowledge Agent Model (must be exact model name, not deployment name)
# Supported: gpt-4o, gpt-4o-mini, gpt-4.1, gpt-4.1-mini, gpt-4.1-nano
AZURE_OPENAI_AGENT_MODEL_NAME=gpt-4.1

# Embedding Model (for RAG vector search)
AZURE_OPENAI_EMBEDDING_DEPLOYMENT_NAME=text-embedding-3-large
AZURE_OPENAI_EMBEDDING_MODEL_NAME=text-embedding-3-large
AZURE_OPENAI_EMBEDDING_DIMENSIONS=1024

# ============================================================================
# AUTHENTICATION
# ============================================================================
AUTH_PASSWORD=<your-secure-password>

# ============================================================================
# AZURE STORAGE (Auto-created by azd up)
# ============================================================================
# Storage is automatically provisioned when you run 'azd up'.
# Authentication:
#   - In Azure (Container Apps): Managed Identity (auto-configured)
#   - Local Docker: Azurite emulator (auto-configured in docker-compose)

AZURE_STORAGE_ACCOUNT_NAME=<auto-created-by-azd>
AZURE_STORAGE_ACCOUNT_URL=https://<account>.blob.core.windows.net
AZURE_STORAGE_CONTAINER_NAME=prism-projects

# ============================================================================
# OPTIONAL: OpenTelemetry
# ============================================================================
ENABLE_OTEL=false

# ============================================================================
# PROJECT CONFIGURATION
# ============================================================================
# Set which project to process (or use --project flag on CLI)
#
# Option 1: CLI parameter (recommended for multiple projects)
#   python main.py process --project myproject
#
# Option 2: Environment variable (if always using one project)
#   PRISM_PROJECT_NAME=myproject

# PRISM_PROJECT_NAME=

# ============================================================================
# MULTI-PROJECT INDEX ISOLATION
# ============================================================================
# Each project automatically gets its own index within your dedicated search service:
#
#   Project: nist-csf
#   Index:   prism-nist-csf-index (auto-created)
#
#   Project: another-project
#   Index:   prism-another-project-index (auto-created)
#
# Workflow:
#   1. Create project: projects/myproject/documents/
#   2. Process:        python main.py process --project myproject
#   3. Create index:   python main.py index create --project myproject
#   4. Upload:         python main.py index upload --project myproject
#   5. Create agent:   python main.py agent create --project myproject
# ============================================================================
